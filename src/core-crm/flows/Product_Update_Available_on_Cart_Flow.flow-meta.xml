<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
  <apiVersion>52.0</apiVersion>
  <assignments>
    <name>Add_to_Modified_Products</name>
    <label>Add to Modified Products</label>
    <locationX>264</locationX>
    <locationY>636</locationY>
    <assignmentItems>
      <assignToReference>Modified_Products</assignToReference>
      <operator>Add</operator>
      <value>
        <elementReference>Loop_Product</elementReference>
      </value>
    </assignmentItems>
    <connector>
      <targetReference>Loop_Product</targetReference>
    </connector>
  </assignments>
  <assignments>
    <name>Set_Available_on_Cart_to_TRUE</name>
    <label>Set Available on Cart to TRUE</label>
    <locationX>264</locationX>
    <locationY>516</locationY>
    <assignmentItems>
      <assignToReference>Loop_Product.Available_on_Cart__c</assignToReference>
      <operator>Assign</operator>
      <value>
        <booleanValue>true</booleanValue>
      </value>
    </assignmentItems>
    <connector>
      <targetReference>Add_to_Modified_Products</targetReference>
    </connector>
  </assignments>
  <interviewLabel
    >Product Update Available on Cart Flow
    {!$Flow.CurrentDateTime}</interviewLabel
  >
  <label>Product Update Available on Cart Flow</label>
  <loops>
    <name>Loop_Product</name>
    <label>Loop Product</label>
    <locationX>176</locationX>
    <locationY>396</locationY>
    <collectionReference>Get_Product_Records</collectionReference>
    <iterationOrder>Asc</iterationOrder>
    <nextValueConnector>
      <targetReference>Set_Available_on_Cart_to_TRUE</targetReference>
    </nextValueConnector>
    <noMoreValuesConnector>
      <targetReference>Update_Product_Records</targetReference>
    </noMoreValuesConnector>
  </loops>
  <processMetadataValues>
    <name>BuilderType</name>
    <value>
      <stringValue>LightningFlowBuilder</stringValue>
    </value>
  </processMetadataValues>
  <processMetadataValues>
    <name>CanvasMode</name>
    <value>
      <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
    </value>
  </processMetadataValues>
  <processMetadataValues>
    <name>OriginBuilderType</name>
    <value>
      <stringValue>LightningFlowBuilder</stringValue>
    </value>
  </processMetadataValues>
  <processType>AutoLaunchedFlow</processType>
  <recordLookups>
    <name>Get_Product_Records</name>
    <label>Get Product Records</label>
    <locationX>176</locationX>
    <locationY>276</locationY>
    <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
    <connector>
      <targetReference>Loop_Product</targetReference>
    </connector>
    <filterLogic>and</filterLogic>
    <filters>
      <field>Available_on_Cart__c</field>
      <operator>EqualTo</operator>
      <value>
        <booleanValue>false</booleanValue>
      </value>
    </filters>
    <filters>
      <field>Ready_for_publishing__c</field>
      <operator>EqualTo</operator>
      <value>
        <stringValue>Yes</stringValue>
      </value>
    </filters>
    <filters>
      <field>IsActive</field>
      <operator>EqualTo</operator>
      <value>
        <booleanValue>true</booleanValue>
      </value>
    </filters>
    <filters>
      <field>Publishing_Start_date__c</field>
      <operator>LessThanOrEqualTo</operator>
      <value>
        <elementReference>$Flow.CurrentDate</elementReference>
      </value>
    </filters>
    <filters>
            <field>Child_of_Prescribed_Program__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
    <getFirstRecordOnly>false</getFirstRecordOnly>
    <object>Product2</object>
    <queriedFields>Id</queriedFields>
    <queriedFields>Available_on_Cart__c</queriedFields>
    <storeOutputAutomatically>true</storeOutputAutomatically>
  </recordLookups>
  <recordUpdates>
    <name>Update_Product_Records</name>
    <label>Update Product Records</label>
    <locationX>176</locationX>
    <locationY>852</locationY>
    <inputReference>Modified_Products</inputReference>
  </recordUpdates>
  <start>
    <locationX>50</locationX>
    <locationY>0</locationY>
    <connector>
      <targetReference>Get_Product_Records</targetReference>
    </connector>
    <schedule>
      <frequency>Daily</frequency>
      <startDate>2022-05-01</startDate>
      <startTime>06:00:00.000Z</startTime>
    </schedule>
    <triggerType>Scheduled</triggerType>
  </start>
  <status>Active</status>
  <variables>
    <name>Modified_Products</name>
    <dataType>SObject</dataType>
    <isCollection>true</isCollection>
    <isInput>false</isInput>
    <isOutput>false</isOutput>
    <objectType>Product2</objectType>
  </variables>
</Flow>
