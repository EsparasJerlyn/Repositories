<template>
    <lightning-spinner if:true={isLoading} alternative-text="Loading..." size="small"></lightning-spinner> 
    <c-custom-search
        if:false={isStatusCompleted}
        search-label="Existing Facilitators"
        search-input-placeholder="Search existing facilitators..."
        search-items={facilitatorSearchItems}
        search-item-icon="standard:orchestrator"
        search-in-progress={facilitatorSearchInProgress}
        parent-id={offeringId}
        empty-message="Enter at least three (3) characters to show results..."
        onitemselect={handleSearchSelect}
        onsearch={handleFacilitatorSearch}
        onemptyblur={resetFacilitatorSearchItems}
        custom-server-search
        oncreate={handleCreateNewRecord}
        object-label-name={objectLabelName}
        new-record-available
    ></c-custom-search>
    <div if:false={showFacilitatorTable} class="slds-text-align_center slds-p-around_medium">
        <p><strong>No facilitator found.</strong></p>
    </div>
    <div if:true={showFacilitatorTable} class="slds-m-vertical_medium slds-scrollable max-height" onitemregister={handleItemRegister}>
        <c-custom-datatable-columned
            key-field="id"
            data={relatedFacilitatorsCopy}
            columns={facilitatorColumns}
            onrowaction={handleRowAction}
            onsave={handleSave}
            oncancel={handleCancel}
            oncellchange={handleCellChange}
            onlookupselect={handleLookupSelect}
            draft-values={draftValues}
            errors={datatableErrors}
            hide-checkbox-column
            show-row-number-column
        ></c-custom-datatable-columned>
    </div>
</template>