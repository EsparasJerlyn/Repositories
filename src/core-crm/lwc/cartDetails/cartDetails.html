<template>

<!-- Your Details starts here -->
<div class="slds-is-relative slds-p-top_xx-large" >
    <lightning-spinner if:true={isLoading} alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
</div>
<div if:false={isLoading}>
    <div class="component">
        <div class="heading1 slds-m-bottom_medium main-color-blue500">Cart Summary</div>
        <!--<div class="bodyRegular slds-m-bottom_large"><i><span class="asterisk">*</span>indicates a required field</i></div>-->

        <div class="component-title">
            <div class="heading2 main-color-blue500">Your Details</div>
        </div>

        <lightning-record-edit-form record-id={contactId} object-api-name="Contact" onsubmit={updateContactFields}>
            <div class="slds-p-around_none slds-m-top_x-small slds-m-bottom_medium slds-m-horizontal_none">
                <!--lightning-layout multiple-rows-->
                <div class="slds-grid slds-wrap">
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">First name</p>

                                <div if:true={editModeFN}>
                                    <lightning-input-field field-name="FirstName" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactFname}></lightning-input-field>
                                </div>

                                <div if:false={editModeFN}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="FirstName" variant="label-hidden" class="slds-p-right_small" value={contactFname} disabled></lightning-input-field>
                                        <!-- <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditFirstName}
                                        ></lightning-button-icon> -->
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Last name</p>

                                <div if:true={editModeLN}>
                                    <lightning-input-field field-name="LastName" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactLname}></lightning-input-field>
                                </div>

                                <div if:false={editModeLN}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="LastName" variant="label-hidden" class="slds-p-right_small" value={contactLname} disabled></lightning-input-field>
                                        <!-- <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditLastName}
                                        ></lightning-button-icon> -->
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12" >
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Email</p>

                                <div if:true={editModeEmail}>
                                    <lightning-input-field field-name="Email" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactEmail}></lightning-input-field>
                                </div>

                                <div if:false={editModeEmail}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="Email" variant="label-hidden" class="slds-p-right_small" value={contactEmail} disabled></lightning-input-field>
                                        <!-- <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditEmail}
                                        ></lightning-button-icon> -->
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12" >
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Mobile</p>

                                <div if:true={editModeMob}>
                                    <lightning-input-field field-name="MobilePhone" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactMobile}></lightning-input-field>
                                </div>

                                <div if:false={editModeMob}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="MobilePhone" variant="label-hidden" class="slds-p-right_small" value={contactMobile} disabled></lightning-input-field>
                                        <!-- <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditMobile}
                                        ></lightning-button-icon> -->
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                <!--/lightning-layout-->
                </div>
                <!--lightning-layout multiple-rows-->
                <div class="slds-grid slds-wrap">
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Dietary requirements</p>

                                <div if:true={editModeDietary}>
                                    <lightning-input-field field-name="Dietary_Requirement__c" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactDiet}></lightning-input-field>
                                </div>

                                <div if:false={editModeDietary}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="Dietary_Requirement__c" variant="label-hidden" class="slds-p-right_small" value={contactDiet} disabled></lightning-input-field>
                                        <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditDietary}
                                        ></lightning-button-icon>
                                    </div>
                                </div> 
                            </div>
                        
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12" >
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Company</p>

                                <div if:true={editModeCompany}>
                                    <lightning-input-field field-name="Company_Name__c" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactCompany}></lightning-input-field>
                                </div>

                                <div if:false={editModeCompany}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="Company_Name__c" variant="label-hidden" class="slds-p-right_small" value={contactCompany} disabled></lightning-input-field>
                                        <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditCompany}
                                        ></lightning-button-icon>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12" >
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                <p class="bodyBold slds-m-around_none">Position</p>

                                <div if:true={editModePosition}>
                                    <lightning-input-field field-name="Position__c" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactPosition}></lightning-input-field>
                                </div>

                                <div if:false={editModePosition}>
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-input-field field-name="Position__c" variant="label-hidden" class="slds-p-right_small" value={contactPosition} disabled></lightning-input-field>
                                        <lightning-button-icon
                                            icon-name="utility:edit"
                                            alternative-text="Edit"
                                            title="Edit Field"
                                            variant="bare"
                                            size="medium"
                                            onclick={handleEditPosition}
                                        ></lightning-button-icon>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <div class="slds-grid slds-wrap slds-p-bottom_small slds-p-right_small">
                            <template if:true={showStaffId}>
                                <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                    <p class="bodyBold slds-m-around_none">Staff ID</p>
    
                                    <div if:true={editModeStaff}>
                                        <lightning-input-field field-name="Nominated_Employee_ID__c" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactEmpId}></lightning-input-field>
                                    </div>
    
                                    <div if:false={editModeStaff}>
                                        <div class="slds-grid slds-grid_vertical-align-center">
                                            <lightning-input-field field-name="Nominated_Employee_ID__c" variant="label-hidden" class="slds-p-right_small" value={contactEmpId} disabled></lightning-input-field>
                                            <lightning-button-icon
                                                icon-name="utility:edit"
                                                alternative-text="Edit"
                                                title="Edit Field"
                                                variant="bare"
                                                size="medium"
                                                onclick={handleEditStaff}
                                            ></lightning-button-icon>
                                        </div>
                                    </div> 
                                </div>
                            </template>
                            <template if:true={showStudentId}>
                                <div class="edit-textbox slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-p-right_medium" >
                                    <p class="bodyBold slds-m-around_none">Student ID</p>
    
                                    <div if:true={editModeStudent}>
                                        <lightning-input-field field-name="Nominated_Student_ID__c" variant="label-hidden" onmouseout={enableReadMode} onchange={contactFieldChanged} value={contactStudentId}></lightning-input-field>
                                    </div>
    
                                    <div if:false={editModeStudent}>
                                        <div class="slds-grid slds-grid_vertical-align-center">
                                            <lightning-input-field field-name="Nominated_Student_ID__c" variant="label-hidden" class="slds-p-right_small" value={contactStudentId} disabled></lightning-input-field>
                                            <lightning-button-icon
                                                icon-name="utility:edit"
                                                alternative-text="Edit"
                                                title="Edit Field"
                                                variant="bare"
                                                size="medium"
                                                onclick={handleEditStudent}
                                            ></lightning-button-icon>
                                        </div>
                                    </div> 
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
                <!--/lightning-layout-->
            </div>
        </lightning-record-edit-form>
    </div>
    <!-- Your Details ends here -->


    <!-- Product summary starts here -->
    <div class="component">
        <div class="component-title">
            <div class="heading2 main-color-blue500">Product Summary</div>
        </div>

        <!-- loop on each cart item -->
        <template for:each={cartItems} for:item="currentItem" for:index="productIndex">
            <div key={currentItem.cartItemId}> 
                <div class="slds-grid slds-wrap mar-bot-10">
                    <div class="slds-size_1-of-1 slds-medium-size_9-of-12 slds-large-size_9-of-12">
                        <div>
                            <h1 class="heading3 main-color-blue500 mt1">{currentItem.productName}</h1>
                        </div>
                    </div>

                    <div class="slds-size_1-of-1 slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <p class="bodyBold slds-float_left mt2">
                            {currentItem.pbName} 
                            <lightning-formatted-number
                                class="pl1"
                                value={currentItem.unitPrice}
                                currency-code={currency}
                                format-style="currency"
                                minimum-fraction-digits="0" 
                                maximum-fraction-digits="0"
                            >
                            </lightning-formatted-number>
                        </p>
                    </div>
                </div>

                <div class="slds-grid slds-wrap">

                    <div class="slds-size_3-of-4">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-3">
                                <div>
                                    <p class="bodyBold pt2 pb1">Date</p>
                                    <p class="bodyRegular">{currentItem.startDate}</p>
                                    
        
                                </div>         
                            </div>
        
                            <div class="slds-size_2-of-3 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                                <div>
                                    <p class="bodyBold pt2 pb1">Delivery</p>
                                    <p class="bodyRegular">{currentItem.deliveryType}</p>
                                </div>   
                            </div>

                            <template if:false={currentItem.seatsAvailable}>
                                <p class="warning-label">There are no longer seats available for the selected date.</p>
                            </template>
                        
                        </div>
                    </div>

                    <!-- <div class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
                        <div>
                            <p class="bodyBold py2">Discount code</p>
                            <div class="slds-grid slds-wrap">

                                <div class="slds-size_1-of-2 mar-right-10">
                                    <lightning-input name={productIndex} data-id={currentItem.cartItemId} type="text" variant="label-hidden"></lightning-input>
                                </div>
                                <div class="slds-size_1-of-3">
                                    <lightning-button data-id={currentItem.cartItemId} variant="brand" label="Apply" title="Apply code" onclick={applyCoupon}></lightning-button>
                                </div>

                            </div>

                            <template if:true={currentItem.showInvalidDiscount}>
                                <p class="warning-label slds-m-left_small">Invalid voucher.</p>
                            </template>
                        </div> 
                    </div> -->


                    <div class="slds-size_1-of-4">
                        <div> 
                            <lightning-button data-id={currentItem.cartItemId} variant="base" label="Remove Item" title="Remove item" onclick={removeCartItem} class="removedItem-button slds-m-top_small"></lightning-button>
                        </div> 

                        <template if:false={currentItem.seatsAvailable}>
                            <p class="warning-label slds-m-left_small">Please remove this item to proceed.</p>
                        </template>

                    </div>
                                                            <!-- loop on each questions - start -->
                                
                                        <!-- <div class="slds-size_2-of-4">
                                            <div class="slds-grid slds-wrap"> -->
                                                <!--  <p class="bodyBold pt2 pb1">Questions</p> -->

                                         <!-- Questions goes here -->
                                    <div class="slds-size_4-of-4 slds-medium-size_2-of-4 slds-large-size_2-of-4 mt1">     
                                         <lightning-layout multiple-rows size="12">
                                            <template for:each={currentItem.relatedAnswers} for:item="question" for:index="index"> 
                                                <lightning-layout-item size="12" padding="around-small" key={question.Id}>
                                                 
                                                    <template if:true={question.IsText}>
                                                        <lightning-textarea 
                                                        name={question.Id} 
                                                        label={question.Label} 
                                                        data-question-id={question.Id} 
                                                        required 
                                                        onchange={handleChange}
                                                        onblur={handleBlur}>
                                                        </lightning-textarea>
                                                    </template>
                                                    <template if:true={question.IsNumber}>
                                                        <lightning-input 
                                                        name={question.Id} 
                                                        data-question-id={question.Id}
                                                        type="number" 
                                                        label={question.Label} 
                                                        required 
                                                        onchange={handleChange}
                                                        onblur={handleBlur}>
                                                        </lightning-input>
                                                    </template>
                                                    <template if:true={question.IsDate}>
                                                        <lightning-input 
                                                        name={question.Id} 
                                                        data-question-id={question.Id} 
                                                        type="date" 
                                                        label={question.Label} 
                                                        required onchange={handleChange}
                                                        onblur={handleBlur}>
                                                    </lightning-input>
                                                    </template>
                                                    <template if:true={question.IsPicklist}>
                                                        <lightning-combobox
                                                            name={question.Id}
                                                            data-question-id={question.Id}
                                                            label={question.Label}
                                                            value={question.Response}
                                                            placeholder="Select Option"
                                                            options={question.Options}
                                                            onchange={handleChange} 
                                                            onblur={handleBlur}
                                                            required>
                                                        </lightning-combobox>
                                                    </template>
                                                    <template if:true={question.IsMultiPicklist}>
                                                        <abbr title="required" class="slds-required">*</abbr>
                                                        <span data-id={question.Id} class="slds-form-element__label" >{question.Label}</span>
                                                        <lightning-dual-listbox 
                                                            data-id={question.Id}
                                                            data-question-id={question.Id}
                                                            name={question.Id}
                                                            variant="label-hidden"
                                                            class="normal-font"
                                                            source-label="Available"
                                                            selected-label="Selected"
                                                            options={question.Options}
                                                            onchange={handleChange}
                                                            onblur={handleBlur}
                                                            required>
                                                        </lightning-dual-listbox>
                                                    </template>
                                                    <template if:true={question.IsCheckbox}>
                                                        <div class="slds-form-element__control checkboxLayout">
                                                            <div class="slds-checkbox">
                                                              <lightning-input
                                                              name={question.Id} 
                                                              data-question-id={question.Id}
                                                              type="checkbox" 
                                                              onchange={handleChange}
                                                              onblur={handleBlur}
                                                              variant="label-stacked"
                                                              >
                                                            </lightning-input>
                                                              <label class="slds-checkbox__label" for="privacy-checkbox">
                                                                <span class="text">{question.Label}</span>
                                                              </label>
                                                            </div>
                                                          </div>
                                                    </template>
                                                    <template if:true={question.IsFileUpload}>
                                                        <lightning-input 
                                                        name ={question.Id}
                                                        data-question-id={question.Id}
                                                        type="file" 
                                                        accept=".xlsx, .xls, .csv, .png, .doc, .docx, .pdf"
                                                        label={question.Label} 
                                                        required 
                                                        onchange={handleChange}
                                                        onblur={handleBlur}>
                                                        </lightning-input>
                                                        <template if:true={question.FileData}>
                                                            <lightning-icon 
                                                                icon-name="utility:success" 
                                                                alternative-text="Success!" 
                                                                variant="success"
                                                                title="success variant xx-small" 
                                                                size="xx-small">
                                                            </lightning-icon>
                                                            <span class="slds-form-element__label">{question.FileData.filename}</span>
                                                        </template>
                                                    </template>
                                                    <template if:true={question.ErrorMessage}>
                                                        <p class="slds-form-element__help slds-text-color_destructive">{question.ErrorMessage}</p>
                                                    </template>
                                                </lightning-layout-item>
                                            </template>
                                        </lightning-layout>
                                    </div>    


                    
                                            <!-- </div>
                                        </div>   -->
                                        <!-- loop on each questions - end -->     

                </div>
            </div>
        </template>
        <!-- <hr> -->
    </div>
    <!-- Product summary ends here -->


    <!-- Registration Questions starts here -->
    <div class="component">
        
        <!-- loop on each questions -->
        <template for:each={questions} for:item="currentQuestion" for:index="questionIndex">
            <div key={currentQuestion.answerId}> 
                
                <div class="slds-grid slds-wrap slds-m-bottom_small">

                    <div class="slds-size_2-of-4">

                        <!-- for normal text input fields (text, number, date) -->
                        <template if:true={currentQuestion.isText}>
                            <p class="bodyBold">{currentQuestion.label}</p>
                            <lightning-input data-id={currentQuestion.answerId} name={questionIndex} type={currentQuestion.inputType} variant="label-hidden" value={currentQuestion.stringResponse} required></lightning-input>
                        </template>

                        <!-- for checkbox -->
                        <template if:true={currentQuestion.isCheckbox}>
                            <lightning-input data-id={currentQuestion.answerId} name={questionIndex} type={currentQuestion.inputType} label={currentQuestion.label} checked={currentQuestion.booleanResponse} required></lightning-input>
                        </template>
                        
                        <!-- for picklist -->
                        <template if:true={currentQuestion.isPicklist}>
                            <p class="bodyBold">{currentQuestion.label}</p>
                            <lightning-combobox data-id={currentQuestion.answerId} name={questionIndex} variant="label-hidden" required value={currentQuestion.stringResponse} options={currentQuestion.picklistOptions}></lightning-combobox>
                        </template>

                        <!-- for picklist -->
                        <template if:true={currentQuestion.isMultiPicklist}>
                            <p class="bodyBold">{currentQuestion.label}</p>
                            <lightning-dual-listbox data-id={currentQuestion.answerId} name={questionIndex} variant="label-hidden" source-label="Available" selected-label="Selected" required options={currentQuestion.picklistOptions} value={currentQuestion.multiPicklistResponse}></lightning-dual-listbox>
                        </template>

                        <!-- for file upload -->
                        <template if:true={currentQuestion.isFileUpload}>
                            <p class="bodyBold">{currentQuestion.label}</p>
                            <!-- <lightning-input data-id={currentQuestion.answerId} name={currentQuestion.answerId} type="file" accept=".xlsx, .xls, .csv, .png, .doc, .docx, .pdf" variant="label-hidden" value={currentQuestion.stringResponse} required></lightning-input> -->
                            <lightning-file-upload record-id={currentQuestion.answerId} data-id={currentQuestion.answerId} name={questionIndex} accept=".xlsx, .xls, .csv, .png, .doc, .docx, .pdf" variant="label-hidden" onuploadfinished={fileUploadFinished}></lightning-file-upload>
                        

                            <!-- <template if:true={currentQuestion.FileData}>
                                <lightning-icon 
                                    icon-name="utility:success" 
                                    alternative-text="Success!" 
                                    variant="success"
                                    title="success variant xx-small" 
                                    size="xx-small">
                                </lightning-icon>
                                <span class="slds-form-element__label">{currentQuestion.FileData.fileName}</span>
                            </template> -->
                        </template>

                    </div>
                </div>

            </div>
        </template>
        <hr>
    </div>
    <!-- Registration Questions ends here -->

    <div class="slds-grid slds-wrap">
        <div class="slds-size_1-of-1 slds-grid slds-grid_align-end">
            <div class="slds-grid slds-wrap">
                <div class="slds-size_8-of-12">
                    <div>
                        <p class="bodyBold py2">Discount code</p>
                        <lightning-input data-id="discountField" name={productIndex} type="text" variant="label-hidden" class="pr1"></lightning-input>
                    </div>         

                    <template if:true={showInvalidDiscount}>
                        <p class="warning-label slds-m-left_small">Invalid code.</p>
                    </template>
                </div>
                <div class="slds-size_4-of-12">
                    <p class="py2">&nbsp;</p>
                    <lightning-button  variant="brand" label="Apply" title="Apply code" onclick={applyCoupon}></lightning-button>
                </div>
            </div>
        </div>
    </div>

    <!-- Totals starts here -->
    <div class="py2 no-padd">
        <div>
            <p class="bodyBold pb2">
                Subtotal
                <span class="slds-float_right">
                    <lightning-formatted-number
                        value={subTotal}
                        currency-code={currency}
                        format-style="currency"
                        minimum-fraction-digits="0" 
                        maximum-fraction-digits="0"
                    >
                    </lightning-formatted-number>
                </span>
            </p>
        </div>
        
        <div>
            <p class="bodyBold">
                Discounts applied
                <span class="slds-float_right">
                    -
                   <lightning-formatted-number
                    value={discountTotal}
                    currency-code={currency}
                    format-style="currency"
                    minimum-fraction-digits="0" 
                    maximum-fraction-digits="0"
                    >
                 </lightning-formatted-number>
                </span>
            </p>
        </div>

        <div class="product-title">
            <h1 class="heading3 main-color-blue500">
                Total
                <span class="heading3 slds-float_right">
                    <lightning-formatted-number
                        value={total}
                        currency-code={currency}
                        format-style="currency"
                        minimum-fraction-digits="0" 
                        maximum-fraction-digits="0"
                        >
                    </lightning-formatted-number>
                </span>
            </h1>
        </div>

        <br>
        <div class="slds-grid terms-condition confirm">
            <lightning-input type="checkbox" name="cbDetails" required onchange={checkEnablePaymentCB} class="bodyRegular"></lightning-input>
                <label for="terms">I confirm my details are correct<sup class="req">*</sup></label>
        </div>
        <div class="slds-grid terms-condition tandc">
            <lightning-input type="checkbox" id="terms" name="cbTerms" required onchange={checkEnablePaymentCB}></lightning-input>
            <label for="terms">I agree with the <a href="https://www.qut.edu.au/study/professional-and-executive-education/terms-and-conditions?_ga=2.147984567.1831940469.1653610703-306839491.1653610703" target="_blank">Terms and Conditions</a><sup class="req">*</sup></label>
        </div>
    </div>
    <!-- Totals ends here -->
    <!-- Confirmation Registration -->
    <template if:true={isFreeOnly}>
        <div class="main-container">
            <div class="header-container slds-col--padded">
                <h2 class="heading2 main-color-blue500 pb2">Payment method</h2>
                <h5 class="bodyBold pb2 fblack">How would you like to pay?</h5>
            </div>
            <template if:false={disablePayment}>
                <div class="btn-container">
                    <a class="btn-link" target="_blank" onclick={confirmRegistration}>
                        <p class="btn-title bodyBold pb2"><strong>Confirmation Registration</strong></p>
                    </a>
                </div>
            </template>
            <template if:true={disablePayment}>
                <div class="btn-container">
                    <div class="btn-link-disabled">
                        <p class="btn-title bodyBold pb2"><strong>Confirmation Registration</strong></p>
                    </div>
                </div>
            </template>
        </div>
    </template>
     <!-- Payment method starts here -->
     <template if:false={isFreeOnly}>
        <c-payment if:true={checkData}
        disable-payment={disablePayment}
        from-cart-summary={fromCartSummary}
        contact-fname={contactFname}
        contact-lname={contactLname}
        contact-email={contactEmail}
        cart-external-id={cartExternalId}
        cart-items={cartItems}
        cart-id={recordId}
        total={total}
        onpaynow={paymentNow}
        ></c-payment>
     </template>
     </div>
    <!-- Payment method ends here -->
</template>