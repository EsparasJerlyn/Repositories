<?xml version="1.0" encoding="UTF-8"?>
<GenAiPromptTemplate xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Prompt Case Summary In Batches</description>
    <developerName>Prompt_Case_Summary_In_Batches</developerName>
    <masterLabel>Prompt Case Summary In Batches</masterLabel>
    <relatedEntity>Case</relatedEntity>
    <relatedField>Case.Case_Summary_del__c</relatedField>
    <templateVersions>
        <content>
Issue Summary: Based on this description field data {!$Input:Case.Description} provide a summary of not more than 50 words about the issue.

Case Age: {!$Input:Case.Case_Age__c} Days

{!$RelatedList:Case.Histories.Records} do not show all the history details, only show the below from the history
Last Queue Name: Based on the above case history show only the last queue name here (search for the queue word in the owner name if it is there consider it as a queue)
Case Owners: Based on the above case history show all case owner names who worked on this case in the order they have worked and here don&apos;t include any queue name, the format should be like this owner1, owner2

Based on all this flow output {!$Flow:Flow_Population_on_Case_Action_Taken_Field.Prompt}  
show each output summary in bulleted points and have a heading for each of it and have created date and created by in separate lines in descending order of created date
don&apos;t include anything regarding who is the sender and who is the receiver of this email
only focus on the resolution provided don&apos;t look for any follow-up questions 

The above should be in this format, if there is no value in any section don&apos;t show it

Action Details:
Case Comments: If it exists
Created Date,
Created By,
Summary of Comments (in dot point format)
Task: If it exists
Created Date,
Created By,
Summary of Comments (in dot point format)
Log Call: If it exists
Created Date,
Created By,
Summary of Comments (in dot point format)
Email: If it exists
Create Date,
From Email,
To Email,
Summary Of Email Content (in dot point format)
Social Comment: If it exists
Created Date,
Created By,
Summary of Comments (in dot point format) 
</content>
        <inputs>
            <apiName>RelatedEntity</apiName>
            <definition>SOBJECT://Case</definition>
            <referenceName>Input:Case</referenceName>
            <required>true</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultOpenAIGPT4</primaryModel>
        <status>Published</status>
        <templateDataProviders>
            <definition>flow://Flow_Population_on_Case_Action_Taken_Field</definition>
            <parameters>
                <definition>SOBJECT://Case</definition>
                <isRequired>true</isRequired>
                <parameterName>RelatedEntity</parameterName>
                <valueExpression>{!$Input:Case}</valueExpression>
            </parameters>
            <referenceName>Flow:Flow_Population_on_Case_Action_Taken_Field</referenceName>
        </templateDataProviders>
        <templateDataProviders>
            <definition>invocable://getRelatedList</definition>
            <parameters>
                <definition>primitive://String</definition>
                <isRequired>true</isRequired>
                <parameterName>parentRecordId</parameterName>
                <valueExpression>{!$Input:Case.Id}</valueExpression>
            </parameters>
            <parameters>
                <definition>primitive://String</definition>
                <isRequired>true</isRequired>
                <parameterName>relatedListName</parameterName>
                <valueExpression>Histories</valueExpression>
            </parameters>
            <referenceName>RelatedList:Case.Histories.Records</referenceName>
        </templateDataProviders>
        <versionNumber>1</versionNumber>
    </templateVersions>
    <templateVersions>
        <content>{!$Apex:CaseHistoryProcessor.Prompt}
</content>
        <inputs>
            <apiName>RelatedEntity</apiName>
            <definition>SOBJECT://Case</definition>
            <referenceName>Input:Case</referenceName>
            <required>true</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultOpenAIGPT4</primaryModel>
        <status>Draft</status>
        <templateDataProviders>
            <definition>apex://CaseHistoryProcessor</definition>
            <parameters>
                <definition>SOBJECT://Case</definition>
                <isRequired>true</isRequired>
                <parameterName>RelatedEntity</parameterName>
                <valueExpression>{!$Input:Case}</valueExpression>
            </parameters>
            <referenceName>Apex:CaseHistoryProcessor</referenceName>
        </templateDataProviders>
        <versionNumber>2</versionNumber>
    </templateVersions>
    <type>einstein_gpt__fieldCompletion</type>
    <visibility>Global</visibility>
</GenAiPromptTemplate>
